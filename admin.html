<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h2>Admin Dashboard</h2>
<table border="1" id="loansTable">
<tr>
  <th>ID</th><th>Name</th><th>Email</th><th>Amount</th><th>Duration</th><th>Status</th><th>Action</th>
</tr>
</table>
<script>
const backendUrl = 'https://<YOUR_GLITCH_PROJECT_NAME>.glitch.me'; // Replace with Glitch URL

async function loadLoans() {
    const res = await fetch(`${backendUrl}/loans`);
    const data = await res.json();
    const table = document.getElementById('loansTable');
    table.innerHTML = `<tr>
      <th>ID</th><th>Name</th><th>Email</th><th>Amount</th><th>Duration</th><th>Status</th><th>Action</th>
    </tr>`;
    data.forEach(loan => {
        const row = table.insertRow();
        row.insertCell(0).innerText = loan.id;
        row.insertCell(1).innerText = loan.name;
        row.insertCell(2).innerText = loan.email;
        row.insertCell(3).innerText = loan.amount;
        row.insertCell(4).innerText = loan.duration;
        row.insertCell(5).innerText = loan.status;
        row.insertCell(6).innerHTML = loan.status === 'Pending' 
          ? `<button onclick="approveLoan(${loan.id})">Approve</button>` 
          : 'Approved';
    });
}

async function approveLoan(loanId) {
    const res = await fetch(`${backendUrl}/approve`, {
        method: 'POST',
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({loanId})
    });
    const data = await res.json();
    alert(data.message);
    loadLoans();
}

loadLoans();
</script>
</body>
</html>
